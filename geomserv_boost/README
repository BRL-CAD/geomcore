Get CMake-ified Boost from here:

http://gitorious.org/boost/cmake/commits/cmake-1.47.0

Swap out the Boost tools/build/CMake/BoostCore.cmake file with the one in this repository, then
move the whole of Boost into src/other/boost.  Will also need to build gflags and glog and install
them in $HOME/third_party - the glog in src/other isn't quite ready yet.

Expand protobuf 2.4.1 into the src/other/protobuf directory.  http://code.google.com/p/protobuf/

build with

cmake .. -Dhome_dir=/my/home/dir


server1 is a tweaked version of this code:

http://code.google.com/p/server1/

The original files said it was GPL3, but the google project page said New BSD license - directly emailed the author
to find out which it was, and he confirmed New BSD license.  The copy in this repo includes updated license headers,
as well as a variety of tweaks for building.






In addition to protobuf, might want to investigate Avro:

http://www.cowtowncoder.com/blog/archives/2011/02/entry_445.html

http://avro.apache.org/docs/1.4.1/index.html

Problem is it needs flex and bison, but at least it does have some CMake build logic...


Sounds like the approach to take here (based on notes from http://code.google.com/apis/protocolbuffers/docs/techniques.html)
is to specify a "meta" protocol which is 

MAGIC MESSAGE_TYPE <PROTOBUF MESSAGE (using SerializeWithLengthPrefix and DeserializeWithLengthPrefix)>

The first three will ALWAYS be fixed length in the same order, so pick those three off first.  Then identify where to put
the incoming stuff based on message type and use the protobuf message processing.

Interesting hints:
http://eli.thegreenplace.net/2011/08/02/length-prefix-framing-for-protocol-buffers/
http://stackoverflow.com/questions/675349/deserialize-unknown-type-with-protobuf-net
http://stackoverflow.com/questions/3230841/api-to-know-the-kind-of-protobuf-message-being-sent-in
http://stackoverflow.com/questions/4094749/platform-independent-protobuf-socket-protocol-what-message-will-i-receive


Other links worth saving:
http://stackoverflow.com/questions/4810026/sending-protobuf-messages-with-boostasio
http://eli.thegreenplace.net/2011/03/20/boost-asio-with-protocol-buffers-code-sample/
http://en.highscore.de/cpp/boost/index.html
http://www.gamedev.net/blog/950/entry-2249317-a-guide-to-getting-started-with-boostasio?pg=1
http://stackoverflow.com/questions/4070836/boostasio-threaded-server-asynchroun-problem-nothing-happen
http://stackoverflow.com/questions/4553162/c-boost-asio-how-to-read-write-with-a-timeout
http://stackoverflow.com/questions/6672724/boost-asio-socket-read-n-bytes-not-more-not-less-and-wait-until-they-come-or-tim
http://www.mail-archive.com/protobuf@googlegroups.com/msg06299.html


http://blog.redshoelace.com/2007/09/what-is-boostextension.html
http://boost-extension.redshoelace.com/docs/boost/extension/index.html

